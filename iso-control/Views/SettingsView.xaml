<UserControl x:Class="Isotone.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             Background="{DynamicResource PrimaryBackgroundBrush}">
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Settings" 
                   FontSize="32" 
                   FontWeight="Light"
                   Foreground="{DynamicResource PrimaryTextBrush}"
                   Margin="0,0,0,24"/>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- General Settings -->
                <materialDesign:Card Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="General Settings" 
                                 FontSize="20" FontWeight="Medium"
                                 Margin="0,0,0,16"/>
                        
                        <CheckBox Content="Start services on Windows startup"
                                IsChecked="{Binding AutoStartServices}"
                                Margin="0,0,0,12"/>
                        
                        <CheckBox Content="Minimize to system tray"
                                IsChecked="{Binding MinimizeToTray}"
                                Margin="0,0,0,12"/>
                        
                        <CheckBox Content="Check for updates automatically"
                                IsChecked="{Binding AutoCheckUpdates}"/>
                    </StackPanel>
                </materialDesign:Card>

                <!-- Path Configuration -->
                <materialDesign:Card Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Path Configuration" 
                                 FontSize="20" FontWeight="Medium"
                                 Margin="0,0,0,16"/>
                        
                        <TextBox Text="{Binding IsotonePath}"
                               materialDesign:HintAssist.Hint="IsotoneStack Installation Path"
                               Style="{StaticResource MaterialDesignOutlinedTextBox}"
                               IsReadOnly="True"
                               Margin="0,0,0,12"/>
                        
                        <TextBox Text="{Binding WebRootPath}"
                               materialDesign:HintAssist.Hint="Web Root Path"
                               Style="{StaticResource MaterialDesignOutlinedTextBox}"
                               Margin="0,0,0,12"/>
                    </StackPanel>
                </materialDesign:Card>

                <!-- Port Configuration -->
                <materialDesign:Card Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Port Configuration" 
                                 FontSize="20" FontWeight="Medium"
                                 Margin="0,0,0,16"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Apache HTTP Port:" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding ApachePort}" Margin="8,4"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Apache HTTPS Port:" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding ApacheSSLPort}" Margin="8,4"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="MariaDB Port:" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding MariaDBPort}" Margin="8,4"/>
                        </Grid>
                    </StackPanel>
                </materialDesign:Card>

                <!-- Error Log Management -->
                <materialDesign:Card Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Error Log Management" 
                                 FontSize="20" FontWeight="Medium"
                                 Margin="0,0,0,16"/>
                        
                        <TextBlock Text="View and manage application error logs for troubleshooting."
                                 TextWrapping="Wrap"
                                 Foreground="{DynamicResource SecondaryTextBrush}"
                                 Margin="0,0,0,16"/>
                        
                        <StackPanel Orientation="Horizontal">
                            <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                                  Command="{Binding OpenErrorLogCommand}"
                                  Margin="0,0,8,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="FileDocument" Margin="0,0,8,0"/>
                                    <TextBlock Text="Open Error Log"/>
                                </StackPanel>
                            </Button>
                            
                            <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                                  Command="{Binding ShowErrorLogPathCommand}"
                                  Margin="0,0,8,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="FolderOpen" Margin="0,0,8,0"/>
                                    <TextBlock Text="Show Log Path"/>
                                </StackPanel>
                            </Button>
                            
                            <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                                  Command="{Binding ClearErrorLogCommand}"
                                  Foreground="#FF5252">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Delete" Margin="0,0,8,0"/>
                                    <TextBlock Text="Clear Log"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </materialDesign:Card>

                <!-- Action Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                    <Button Style="{StaticResource MaterialDesignRaisedButton}"
                          Command="{Binding SaveSettingsCommand}"
                          Margin="0,0,8,0">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ContentSave" Margin="0,0,8,0"/>
                            <TextBlock Text="Save Settings"/>
                        </StackPanel>
                    </Button>
                    
                    <Button Style="{StaticResource MaterialDesignOutlinedButton}"
                          Command="{Binding ResetSettingsCommand}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Restore" Margin="0,0,8,0"/>
                            <TextBlock Text="Reset to Defaults"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>