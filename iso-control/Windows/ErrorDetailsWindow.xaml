<Window x:Class="Isotone.Windows.ErrorDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Error Details"
        Height="600" Width="800"
        MinHeight="400" MinWidth="600"
        WindowStartupLocation="CenterScreen"
        Background="#0F1829"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        FontFamily="{DynamicResource MaterialDesignFont}"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#1A2332" 
                Padding="24,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Error Icon -->
                <materialDesign:PackIcon Grid.Column="0"
                                       x:Name="ErrorIcon"
                                       Kind="AlertCircle"
                                       Width="40"
                                       Height="40"
                                       Foreground="#FF5252"
                                       VerticalAlignment="Center"
                                       Margin="0,0,16,0"/>

                <!-- Title and Timestamp -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock x:Name="ErrorTitle"
                             Text="Error"
                             FontSize="18"
                             FontWeight="SemiBold"
                             Foreground="White"
                             Margin="0,0,0,4"/>
                    <TextBlock x:Name="ErrorTimestamp"
                             Text="2024-01-01 00:00:00"
                             FontSize="12"
                             Foreground="#8B92A7"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      Padding="24">
            <StackPanel>
                <!-- Error Message -->
                <TextBlock Text="Error Message"
                         FontWeight="SemiBold"
                         Foreground="White"
                         FontSize="14"
                         Margin="0,0,0,8"/>
                
                <Border Background="#1A2332"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,16">
                    <TextBlock x:Name="ErrorMessage"
                             Text="Error message goes here"
                             Foreground="#E0E0E0"
                             TextWrapping="Wrap"
                             FontSize="13"/>
                </Border>

                <!-- Details Section -->
                <StackPanel x:Name="DetailsSection" Visibility="Collapsed">
                    <TextBlock Text="Additional Details"
                             FontWeight="SemiBold"
                             Foreground="White"
                             FontSize="14"
                             Margin="0,0,0,8"/>
                    
                    <Border Background="#1A2332"
                            CornerRadius="8"
                            Padding="16"
                            Margin="0,0,0,16">
                        <TextBlock x:Name="ErrorDetails"
                                 Text="Details go here"
                                 Foreground="#E0E0E0"
                                 TextWrapping="Wrap"
                                 FontSize="12"/>
                    </Border>
                </StackPanel>

                <!-- Source Section -->
                <StackPanel x:Name="SourceSection" Visibility="Collapsed">
                    <TextBlock Text="Source"
                             FontWeight="SemiBold"
                             Foreground="White"
                             FontSize="14"
                             Margin="0,0,0,8"/>
                    
                    <Border Background="#1A2332"
                            CornerRadius="8"
                            Padding="16"
                            Margin="0,0,0,16">
                        <TextBlock x:Name="ErrorSource"
                                 Text="Source info"
                                 Foreground="#8B92A7"
                                 FontFamily="Consolas"
                                 FontSize="12"/>
                    </Border>
                </StackPanel>

                <!-- Stack Trace Section -->
                <StackPanel x:Name="StackTraceSection" Visibility="Collapsed">
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0"
                                 Text="Stack Trace"
                                 FontWeight="SemiBold"
                                 Foreground="White"
                                 FontSize="14"
                                 VerticalAlignment="Center"/>
                        
                        <Button Grid.Column="1"
                                x:Name="ToggleStackTraceButton"
                                Content="Show"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Foreground="#4A9EFF"
                                Click="ToggleStackTrace_Click"/>
                    </Grid>
                    
                    <Border x:Name="StackTraceContent"
                            Background="#0F1011"
                            CornerRadius="8"
                            Padding="16"
                            Visibility="Collapsed"
                            Margin="0,0,0,16">
                        <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                            <TextBlock x:Name="ErrorStackTrace"
                                     Text="Stack trace"
                                     Foreground="#8B92A7"
                                     FontFamily="Consolas"
                                     FontSize="11"
                                     TextWrapping="Wrap"/>
                        </ScrollViewer>
                    </Border>
                </StackPanel>

                <!-- Exception Type Section -->
                <StackPanel x:Name="ExceptionTypeSection" Visibility="Collapsed">
                    <TextBlock Text="Exception Type"
                             FontWeight="SemiBold"
                             Foreground="White"
                             FontSize="14"
                             Margin="0,0,0,8"/>
                    
                    <Border Background="#1A2332"
                            CornerRadius="8"
                            Padding="16"
                            Margin="0,0,0,16">
                        <TextBlock x:Name="ExceptionType"
                                 Text="Exception type"
                                 Foreground="#8B92A7"
                                 FontFamily="Consolas"
                                 FontSize="12"/>
                    </Border>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <Border Grid.Row="2"
                Background="#1A2332"
                BorderBrush="#2A3C54"
                BorderThickness="0,1,0,0"
                Padding="24,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- View Log Button -->
                <Button Grid.Column="0"
                        x:Name="ViewLogButton"
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        BorderBrush="#2A3C54"
                        Foreground="White"
                        Click="ViewLog_Click"
                        Margin="0,0,8,0">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="FileDocument" 
                                               VerticalAlignment="Center"
                                               Margin="0,0,8,0"/>
                        <TextBlock Text="View Log" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Copy Button -->
                <Button Grid.Column="2"
                        x:Name="CopyButton"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Background="#4A9EFF"
                        BorderThickness="0"
                        Foreground="White"
                        Click="Copy_Click"
                        Margin="0,0,8,0">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="ContentCopy" 
                                               VerticalAlignment="Center"
                                               Margin="0,0,8,0"/>
                        <TextBlock Text="Copy Error" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Close Button -->
                <Button Grid.Column="3"
                        Content="Close"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Background="#2A3C54"
                        BorderThickness="0"
                        Foreground="White"
                        Click="Close_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>
